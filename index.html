<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cs-ddl</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

    <!-- 导航栏 -->
    <nav>
        <ul id="navbar">
            <li><a href="#" id="nav-competition" class="active" onclick="showSection('competition-section')">竞赛信息</a></li>
            <li><a href="#" id="nav-courses" onclick="showSection('courses-section')">选课红黑榜</a></li>
            <li><a href="#" id="nav-testimonials" onclick="showSection('testimonials-section')">学长说</a></li>
        </ul>
    </nav>

    <!-- 内容部分 -->
    <div id="competition-section" class="section">
        <div id="competition-list" class="grid-container"></div>
    </div>

    <div id="courses-section" class="section" style="display: none;">
        <h1>选课红黑榜</h1>
        <div id="course-list" class="grid-container"></div>
    </div>

    <div id="testimonials-section" class="section" style="display: none;">
        <h1>学长说</h1>
        <div id="testimonial-list" class="grid-container"></div>
    </div>

    <script>
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => section.style.display = 'none');
            document.getElementById(sectionId).style.display = 'block';
            document.querySelectorAll('#navbar a').forEach(nav => nav.classList.remove('active'));
            document.querySelector(`#nav-${sectionId.split('-')[0]}`).classList.add('active');
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return isNaN(date) ? '无效日期' : date.toLocaleString();
        }

        fetch('data/competitions.json')
            .then(response => response.json())
            .then(data => {
                const competitionList = document.getElementById('competition-list');
                data.forEach(competition => {
                    const competitionCard = document.createElement('div');
                    competitionCard.classList.add('card');
                    competitionCard.innerHTML = `
                        <h3>${competition.name}</h3>
                        <p>类别: ${competition.category || '未定义'}</p>
                        <p>报名截止日期: ${formatDate(competition.signup_deadline)}</p>
                        <p>提交作品截止日期: ${formatDate(competition.submission_deadline)}</p>
                        <p>级别: ${competition.level || '未定义'}</p>
                        <p>赛事文件：<a href="${competition.params_file}" target="_blank">下载参赛文件</a></p>
                        <p>推荐指数: ${competition.recommendation || '未定义'}/5</p>
                        <p>赛事官网：<a href="${competition.website}" target="_blank">查看详情</a></p>
                        <p>备注：${competition.remarks || '无'}</p>
                    `;
                    competitionList.appendChild(competitionCard);
                });
            });
    </script>

</body>
</html>
